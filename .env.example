# -----------------------------------------------------------------
# MCP Server Configuration
# -----------------------------------------------------------------

# Transport type: "stdio" or "http"
MCP_TRANSPORT_TYPE=http

# Session mode: "stateless", "stateful", or "auto" (only used if MCP_TRANSPORT_TYPE=http)
MCP_SESSION_MODE=auto

# Log level: "debug", "info", "warning", "error", "crit", "alert", "emerg"
MCP_LOG_LEVEL=debug

# Directory for log files
LOGS_DIR=logs/

# Response format: "json" (LLM-optimized), "markdown" (human-readable), "auto" (client-detected)
# json: Pure structured JSON - best for LLM parsing, lowest token count
# markdown: Formatted text - best for human UIs, higher token count
# auto: Detect client type and choose format automatically
MCP_RESPONSE_FORMAT=json

# Response verbosity: "minimal" (essential only), "standard" (balanced), "full" (everything)
# minimal: Core data only (e.g., commit hash, success status)
# standard: Core data + useful context (e.g., file stats, branch info) [RECOMMENDED]
# full: All available data including detailed breakdowns
MCP_RESPONSE_VERBOSITY=standard

# -----------------------------------------------------------------
# HTTP Transport Configuration (only used if MCP_TRANSPORT_TYPE=http)
# -----------------------------------------------------------------

MCP_HTTP_HOST=127.0.0.1
MCP_HTTP_PORT=3015

# Comma-separated list of allowed origins for CORS
MCP_ALLOWED_ORIGINS=http://localhost:8080

# -----------------------------------------------------------------
# Authentication Configuration
# -----------------------------------------------------------------

# Secret key for signing JWTs (must be at least 32 characters long)
# IMPORTANT: This is required for the HTTP transport and OAuth2
MCP_AUTH_SECRET_KEY=your-super-secret-key-that-is-at-least-32-characters-long

# -----------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------

# Supabase Project URL
SUPABASE_URL=
# Supabase Anonymous Key (public, safe for client-side use)
SUPABASE_ANON_KEY=
# Supabase Service Role Key (private, for server-side admin tasks)
SUPABASE_SERVICE_ROLE_KEY=

# -----------------------------------------------------------------
# LLM Provider Configuration (Optional)
# -----------------------------------------------------------------

# API key for OpenRouter
OPENROUTER_API_KEY=

# Default LLM model to use
LLM_DEFAULT_MODEL="google/gemini-2.5-flash-preview-05-20"

# Default temperature for LLM responses
LLM_DEFAULT_TEMPERATURE=0.7

# -----------------------------------------------------------------
# Storage Configuration
# -----------------------------------------------------------------
# The storage provider to use. Options: "in-memory", "filesystem", "supabase", "cloudflare-r2", "cloudflare-kv".
STORAGE_PROVIDER_TYPE="filesystem"
# Path for the filesystem storage provider. Required if STORAGE_PROVIDER_TYPE is "filesystem".
STORAGE_FILESYSTEM_PATH="./.storage"

# -----------------------------------------------------------------
# Git Configuration
# -----------------------------------------------------------------
# Git provider selection: "auto" (detect best available), "cli" (local git binary), "isomorphic" (edge-compatible)
GIT_PROVIDER=auto

# Enable GPG/SSH commit signing (true/false)
GIT_SIGN_COMMITS=false

# Path to custom wrap-up instructions markdown file (optional)
# GIT_WRAPUP_INSTRUCTIONS_PATH=/path/to/custom-wrapup.md

# Optional: Restrict all git operations to this base directory tree
# When set, prevents access to directories outside this path (security sandboxing)
# Useful for multi-tenant environments or shared hosting scenarios
# GIT_BASE_DIR=/path/to/safe/git/repos

# Maximum timeout for git commands in milliseconds (default: 30000)
GIT_MAX_COMMAND_TIMEOUT_MS=30000

# Maximum buffer size for git command output in megabytes (default: 10)
GIT_MAX_BUFFER_SIZE_MB=10
